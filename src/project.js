require=function t(e,i,a){function o(s,r){if(!i[s]){if(!e[s]){var c="function"==typeof require&&require;if(!r&&c)return c(s,!0);if(n)return n(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){var i=e[s][1][t];return o(i?i:t)},l,l.exports,t,e,i,a)}return i[s].exports}for(var n="function"==typeof require&&require,s=0;s<a.length;s++)o(a[s]);return o}({AnimationEvents:[function(t,e,i){"use strict";cc._RFpush(e,"e877fEVdgZLbJoqWM5xBLd+","AnimationEvents"),cc.Class({"extends":cc.Component,init:function(t){this.hud=t},onChargeCompleted:function(){this.hud.onChargeCompleted()},onLoopChangedCompleted:function(){this.hud.onLoopChangedAnimationCompleted()}}),cc._RFpop()},{}],EnemySpawnManager:[function(t,e,i){"use strict";cc._RFpush(e,"0f945fZBndCoqkThdZyzkN3","EnemySpawnManager");var a=t("globals"),o=t("Monster");cc.Class({"extends":cc.Component,properties:{_pools:{"default":[],type:[cc.NodePool]},prefabs:{"default":[],type:[cc.Prefab],tooltip:"Indice da lista deve ser igual ao id do inimigo"}},onLoad:function(){this._pools[o.Skills.Nulo]=new cc.NodePool("Monster"),this._pools[o.Skills.Pular]=new cc.NodePool("Monster"),this._pools[o.Skills.Voar]=new cc.NodePool("Monster")},init:function(t){this.game=t;var e=2,i=0;this._pools.forEach(function(t){for(var a=0;a<e;a++){var o=cc.instantiate(this.prefabs[i]);t.put(o)}i++},this)},_create:function(t){var e=null;return e=this._pools[t].size()>0?this._pools[t].get():cc.instantiate(this.prefabs[t])},spawn:function(t,e){var i=this._create(e);i.parent=this.game.objectsLayer,i.getComponent("Monster").init(this.game,a.randomIntFromInterval(this.game.rangeStart,this.game.rangeEnd),e),.5==i.anchorY?i.setPosition(cc.p(t,this.game.groundY+i.height/2)):0==i.anchorY?i.setPosition(cc.p(t,this.game.groundY)):i.setPosition(cc.p(t,this.game.groundY+i.height/2))},despawn:function(t){this._pools[t.getComponent("Monster").skill].put(t)},despawnMany:function(t){t.forEach(function(t){this.despawn(t)},this)}});cc._RFpop()},{Monster:"Monster",globals:"globals"}],GameOverMenu:[function(t,e,i){"use strict";cc._RFpush(e,"da367xMquJGkLUOauIp1ZU3","GameOverMenu");var a=t("Leaderboard");cc.Class({"extends":cc.Component,properties:{btn_play:cc.Button,btn_resume:cc.Button,lblHighScore:cc.Label,txtName:cc.EditBox,btnSubmit:cc.Button,lblSubmit:cc.Label,leaderboardPanel:cc.Node},init:function(t,e){this.game=t,this._atualizarHighScore(t.score),this.btn_resume.interactable=e},_atualizarHighScore:function(t){var e=cc.sys.localStorage,i=e.getItem("highScore"),a="";i?t>i?(e.setItem("highScore",t.toString()),a=t.toString()):a=i:(e.setItem("highScore",t.toString()),a=t.toString()),this.lblHighScore.string=a},submitScore:function(){var t=cc.sys.localStorage,e=new a,i=this.txtName.string,o=t.getItem("highScore"),n=t.getItem("id");i?(this.btnSubmit.interactable=!1,e.save(n,i,o,function(e){n||t.setItem("id",e.name),this.btnSubmit.interactable=!0,this._abrirTelaRanking()}.bind(this)),this.txtName.string="",this.lblSubmit.string="Open Ranking"):this._abrirTelaRanking()},_abrirTelaRanking:function(){this.leaderboardPanel.setPosition(0,0);var t=cc.find("Canvas/PanelsLayer/LeaderboardPanel/scroll/view/ListItems").getComponent("RankListItems");t.init()},txtNameChanged:function(){this.txtName.string.length>0?this.lblSubmit.string="Submit Score":this.lblSubmit.string="Open Ranking"},restart:function(){cc.director.loadScene("gameScene")},resumir:function(){this.fechar(),this.game.resumir()},abrir:function(){this.node.setPosition(0,0);var t=this.node.getComponent(cc.Widget);t.left=t.right=t.top=t.bottom=0},fechar:function(){this.node.setPosition(1200,0);var t=this.node.getComponent(cc.Widget);t.left=1200,t.right=-1200}}),cc._RFpop()},{Leaderboard:"Leaderboard"}],Game:[function(t,e,i){"use strict";function a(){}cc._RFpush(e,"198ce84EOhDoIfR3Pw06X+H","Game");var o=t("globals"),n=t("Player"),s=t("Item"),r=t("Monster"),c=t("HUDManager"),h=t("GameOverMenu"),l=t("MainMenu");if(cc.Class({"extends":cc.Component,properties:{ground:{"default":null,type:cc.Node},grounds:{"default":[],type:[cc.Node]},layersFases:{"default":[],type:[cc.Node]},allBackgroundLayers:{"default":null,type:cc.Node},player:n,objectsLayer:cc.Node,HUD:c,gameOverPanel:h,mainMenuPanel:l,scoreAudio:{"default":null,url:cc.AudioClip},scoreInARowAudios:{"default":[],url:[cc.AudioClip]},itemAudio:{"default":null,url:cc.AudioClip},hitAudio:{"default":null,url:cc.AudioClip},gameOverAudio:{"default":null,url:cc.AudioClip},distanciaEntreChaoETeto:{"default":450,tooltip:"Distância entre o chão e o teto"},velocidadeStarMax:{"default":500,tooltip:"Velocidade máxima da estrela"},velocidadeFinalDoMonstroDoLoopInicial:{"default":50,tooltip:"Velocidade final dos monstros do loop inicial"},acrescimoDaVelocidadeDosMonstrosACadaLoop:{"default":10,tooltip:"Acréscimo que se dá a velocidade final do range de velocidade dos monstros a cada loop"},velocidadeMonsterMax:{"default":400,tooltip:"Velocidade máxima dos monstros"},nlcRequisitoParaDropItemPwUpInicial:{"default":10,tooltip:"Número de nlc inicial para dropar um item de power up"},nlcRequisitoParaUpgradeItemScore1Inicial:{"default":15,tooltip:"Número de nlc inicial para que o score item evolua para starbright"},nlcRequisitoParaUpgradeItemScore2Inicial:{"default":25,tooltip:"Número de nlc inicial para que o score item evolua para gem"},numeroDeNukesInicial:{"default":1,tooltip:"Número de Nukes Inicial"},numeroDeNukesGanhosAoFinalDoLoop:{"default":2,tooltip:"Número de Nukes ganhos ao final de um loop"},habilitarSom:!0},onLoad:function(){this.ceilingY=this.node.height/2,this.groundY=this.ground.y+this.ground.height/2;var t=this.ceilingY-this.groundY;if(t<this.distanciaEntreChaoETeto){var e=this.distanciaEntreChaoETeto-t,i=this.player.avatarNode.position;this.player.avatarNode.setPositionY(i.y-e);for(var a in this.grounds){var n=this.grounds[a].position;this.grounds[a].setPositionY(n.y-e)}this.groundY=this.ground.y+this.ground.height/2}this.enemySpawnManager=this.node.getComponent("EnemySpawnManager"),this.itemSpawnManager=this.node.getComponent("ItemSpawnManager"),this.enemySpawnManager.init(this),this.itemSpawnManager.init(this);var s=cc.director.getCollisionManager();s.enabled=!0,this.gameOverPanel.fechar(),this.mainMenuPanel.init(this),this.mainMenuPanel.abrir();var r=cc.url.raw("resources/fases_config.json");cc.loader.load(r,function(t,e){this.fasesConfigJson=e,this.endMonsterSpeedAtTheCurrentLoop=this.velocidadeFinalDoMonstroDoLoopInicial,this.changeLevelTo(o.Fases.Primeira)}.bind(this))},start:function(){this.HUD.init(this)},init:function(t){this.mainMenuPanel.fechar(),this.velStarAdd=-5,this.controleAlternativo=t,this.primeiroScoreItem=!0,this.spawnNewScoreItem(!0),this.score=0,this.loopRelativeScore=0,this.hasHeart=!1,this.hasStomp=!1,this.notLandedCounter=0,this.timesLooped=0,this.nlcRequisitoParaDropItemPwUp=this.nlcRequisitoParaDropItemPwUpInicial,this.nlcRequisitoParaUpgradeItemScore1=this.nlcRequisitoParaUpgradeItemScore1Inicial,this.nlcRequisitoParaUpgradeItemScore2=this.nlcRequisitoParaUpgradeItemScore2Inicial,this.launchShieldItem(),this.nukesCount=this.numeroDeNukesInicial,this.HUD.habilitarNukeButton(!0),this.HUD.atualizarNukeButtonLabel(this.nukesCount),this.hasChristiArma=!1,this.armaEnergy=0,this.hasRosarium=!1,this.rosariumSlash=0,this.currentEquipActive=u.None},changeLevelTo:function(t){this.faseCorrente=t;var e=a.getFaseById(this.fasesConfigJson,t),i=this.endMonsterSpeedAtTheCurrentLoop*(parseFloat(e.range.rangeStart)/100),n=this.endMonsterSpeedAtTheCurrentLoop*(parseFloat(e.range.rangeEnd)/100);if(this.tempoEclosao=parseFloat(e.tempoEclosao),this.faseCorrente==o.Fases.Primeira?this.rangeStart=parseInt(e.range.rangeStart):this.rangeStart=i,this.rangeEnd=n,this.starsToComplete=parseInt(e.starsToComplete),this.faseCorrente==o.Fases.Ultima)this.player.iniciarFlap(),this.HUD.habilitarWings(!0);else{var s=this.player.desativarFlap();s&&this.HUD.habilitarWings(!1)}this._disparaAnimacaoDeTransicaoDeFase(),cc.log("passou para a fase: "+this.faseCorrente),cc.log("rangeStart: "+this.rangeStart),cc.log("rangeEnd: "+this.rangeEnd)},_disparaAnimacaoDeTransicaoDeFase:function(t){switch(this.faseCorrente){case o.Fases.Primeira:t&&(this.allBackgroundLayers.active=!0,this._resetPosicaoFases(),this.allBackgroundLayers.getComponent(cc.Animation).play("scrollWayUp"),this.allBackgroundLayers.parent.getChildByName("hotWindFX").getComponent(cc.ParticleSystem).stopSystem());break;case o.Fases.Segunda:this.allBackgroundLayers.active=!1,this.layersFases[0].getComponent(cc.Animation).play("scrollCenterToUp"),this.layersFases[1].getComponent(cc.Animation).play("scrollDownToCenter");break;case o.Fases.Ultima:this.allBackgroundLayers.active=!1,this.layersFases[1].getComponent(cc.Animation).play("scrollCenterToUp"),this.layersFases[2].getComponent(cc.Animation).play("scrollDownToCenter"),this.allBackgroundLayers.parent.getChildByName("hotWindFX").getComponent(cc.ParticleSystem).resetSystem()}},_resetPosicaoFases:function(){this.layersFases[0].setPosition(0,0),this.layersFases[1].setPosition(0,-700),this.layersFases[2].setPosition(0,-641)},loop:function(){var t=this.loopRelativeScore-this.starsToComplete;this.loopRelativeScore=t,this.endMonsterSpeedAtTheCurrentLoop+=this.acrescimoDaVelocidadeDosMonstrosACadaLoop,this.changeLevelTo(o.Fases.Primeira),this._disparaAnimacaoDeTransicaoDeFase(!0),this.player.avatarIsOnGround()&&this.HUD.habilitarWings(!1),this.HUD.dispararLoopChangedAnimation(),this.timesLooped++,this.HUD.atualizarLoops(this.timesLooped),this.HUD.atualizarLevelsProgressBar(this.loopRelativeScore),cc.log("passou para o loop: "+this.timesLooped),cc.log("loop relative score: "+this.loopRelativeScore.toString()),this.ganharNuke()},spawnNewScoreItem:function(t){this.notLandedCounter>=this.nlcRequisitoParaUpgradeItemScore2?this.spawnNewAlma2():this.notLandedCounter>=this.nlcRequisitoParaUpgradeItemScore1?this.spawnNewAlma1():this.spawnNewAlma(t)},spawnNewAlma:function(t){var e=this.itemSpawnManager.create(s.ItemID.Alma);t?this.velStarAdd=100:this.velStarAdd+=5,e.getComponent("Star").vel+this.velStarAdd>this.velocidadeStarMax&&this.resetVelStarAdd(),this.atualizarStarSpeedMeter(e.getComponent("Star").vel),this.existeScoreItemNoMapa(t)||this.itemSpawnManager.spawn(e,"Star",s.ItemID.Alma,s.ItemType.Score,this._getNewScoreItemPosition()),cc.log("Adicao: "+this.velStarAdd),cc.log("Velocidade atual da estrela: "+(e.getComponent("Star").vel+this.velStarAdd))},spawnNewAlma1:function(){var t=this.itemSpawnManager.create(s.ItemID.Alma1);this.velStarAdd+=10,t.getComponent("Special").vel+this.velStarAdd>this.velocidadeStarMax&&this.resetVelStarAdd(),this.atualizarStarSpeedMeter(t.getComponent("Special").vel),this.existeScoreItemNoMapa(!1)||this.itemSpawnManager.spawn(t,"Special",s.ItemID.Alma1,s.ItemType.Score,this._getNewScoreItemPosition()),cc.log("Adicao: "+this.velStarAdd),cc.log("Velocidade atual da estrela: "+(t.getComponent("Special").vel+this.velStarAdd))},spawnNewAlma2:function(){var t=this.itemSpawnManager.create(s.ItemID.Alma2);this.velStarAdd+=15,t.getComponent("Special").vel+this.velStarAdd>this.velocidadeStarMax&&this.resetVelStarAdd(),this.atualizarStarSpeedMeter(t.getComponent("Special").vel),this.existeScoreItemNoMapa(!1)||this.itemSpawnManager.spawn(t,"Special",s.ItemID.Alma2,s.ItemType.Score,this._getNewScoreItemPosition()),cc.log("Adicao: "+this.velStarAdd),cc.log("Velocidade atual da estrela: "+(t.getComponent("Special").vel+this.velStarAdd))},launchShieldItem:function(){var t=function(){var t=!1;switch(this.faseCorrente){case o.Fases.Primeira:t=o.randomWith1PercentProbability();break;case o.Fases.Segunda:t=o.randomWith10PercentProbability();break;case o.Fases.Ultima:t=o.randomWith20PercentProbability()}t&&this.spawnNewShieldItem(),cc.log("spawna shielditem: "+t)}.bind(this);this.schedule(t,10,cc.macro.REPEAT_FOREVER)},spawnNewShieldItem:function(){var t=o.randomFromList([s.ItemID.Armor,s.ItemID.Sword]);switch(t){default:case s.ItemID.Armor:this.spawnNewArmor();break;case s.ItemID.Sword:this.spawnNewSword()}},spawnNewArmor:function(){var t=this.itemSpawnManager.create(s.ItemID.Armor),e=t.getComponent("ShieldItem"),i=this;e.hit=function(t){i.ganharChristiArma()},e.sumiu=function(){},this.itemSpawnManager.spawn(t,"ShieldItem",s.ItemID.Armor,s.ItemType.Shield,this._getNewShieldItemPosition())},spawnNewSword:function(){var t=this.itemSpawnManager.create(s.ItemID.Sword),e=t.getComponent("ShieldItem"),i=this;e.hit=function(t){i.ganharRosarium()},e.sumiu=function(){},this.itemSpawnManager.spawn(t,"ShieldItem",s.ItemID.Sword,s.ItemType.Shield,this._getNewShieldItemPosition())},_getNewShieldItemPosition:function(){var t=0,e=this.node.width/2;return t=cc.randomMinus1To1()*e,cc.p(t,this.ceilingY)},resetVelStarAdd:function(){this.velStarAdd=0},alterarVelStarAdd:function(t){this.velStarAdd-=5;var e=.5*this.velStarAdd,i=.05*this.velStarAdd,a=Math.round(t?i:e);this.velStarAdd=a<=5?-5:a},atualizarStarSpeedMeter:function(t){var e=this.velStarAdd/(this.velocidadeStarMax-t);this.HUD.atualizarStarSpeedMeter(e*-1)},_getNewScoreItemPosition:function(){var t=0,e=this.ceilingY,i=this.node.width/2;return t=cc.randomMinus1To1()*i,this.primeiroScoreItem&&t>=-100&&t<=100&&(t=t>0?t+80:t-80),cc.p(t,e)},existeScoreItemNoMapa:function(t){if(t)return!1;for(var e=0,i=this.objectsLayer.getChildren(),a=0,o=i.length;a<o;a++){var n=i[a];switch(n.getName()){case"alma":var s=n.getComponent("Star");s.destroyed||e++;break;case"starbright":case"gem":var s=n.getComponent("Special");s.destroyed||e++}}return e>0},_destroyAllScoreItem:function(){for(var t=this.objectsLayer.getChildren(),e=0,i=t.length;e<i;e++){var a=t[e];"alma"!=a.getName()&&"starbright"!=a.getName()&&"gem"!=a.getName()||a.destroy()}},scoreItemTocouOChao:function(){this.HUD.habilitarScoreInARow(!1),this.HUD.atualizarScoreInARow(this.notLandedCounter=0,!1)},scoreItemEclodiu:function(t){this.primeiroScoreItem&&(this.player.init(this,this.controleAlternativo),this.primeiroScoreItem=!1,this.velStarAdd=-5),this.spawnNewMonster(t),this.diminuirRequisitosNlc(),this.atualizarNLCHUD(),this.alterarVelStarAdd(),this.spawnNewScoreItem()},spawnNewMonster:function(t){switch(this.faseCorrente){default:case o.Fases.Primeira:var e=r.Skills.Nulo;break;case o.Fases.Segunda:var e=o.randomIntFromInterval(r.Skills.Nulo,r.Skills.Pular);break;case o.Fases.Ultima:var e=o.randomIntFromInterval(r.Skills.Nulo,r.Skills.Voar)}this.enemySpawnManager.spawn(t,e)},destroyAllMonsters:function(){var t=this.getMonsters(),e=t.length>0;for(var i in t)t[i].getComponent("Monster").die();e&&(0==--this.nukesCount&&this.HUD.habilitarNukeButton(!1),this.HUD.atualizarNukeButtonLabel(this.nukesCount),this.resetarRequisitosNlc())},hasMonsters:function(){return this.getMonsters().length>0},getMonsters:function(){for(var t=this.objectsLayer.getChildren(),e=[],i=0,a=t.length;i<a;i++){var o=t[i];if("RedMonster"==o.getName()||"monstro2"==o.getName()||"Flyer"==o.getName()){var n=o.getComponent("Monster");n.destroyed||e.push(o)}}return e},onEnemyDeath:function(t){this.enemySpawnManager.despawn(t)},avaliarColisaoComMonstro:function(t,e){if(this.hasStomp&&t)this.hasStomp=!1,this.HUD.habilitarStomp(!1),this.player.diminuirAceleracao(),e.die(),this.hasMonsters()||(this.aumentarRequisitosNlc(),this.atualizarNLCHUD());else if(this.hasChristiArma&&this.hasRosarium)switch(this.currentEquipActive){case u.ChristiArma:this.playerTomouDano();break;case u.RosariumSancti:0==--this.rosariumSlash&&this.perderRosarium(),e.die("slash"),this.hasMonsters()||(this.aumentarRequisitosNlc(),this.atualizarNLCHUD()),cc.log("rosariumSlash = "+this.rosariumSlash),this.HUD.atualizarSlashCountLabel(this.rosariumSlash)}else this.hasChristiArma?this.playerTomouDano():this.hasRosarium&&this.currentEquipActive==u.RosariumSancti?(0==--this.rosariumSlash&&this.perderRosarium(),e.die("slash"),this.hasMonsters()||(this.aumentarRequisitosNlc(),this.atualizarNLCHUD()),cc.log("rosariumSlash = "+this.rosariumSlash),this.HUD.atualizarSlashCountLabel(this.rosariumSlash)):this.playerTomouDano()},spawnNewPowerUpItem:function(){var t=o.randomFromList([s.ItemID.Heart,s.ItemID.Stomp]),e=null,i="",a=0,n=this.node.width/2;switch(a=cc.randomMinus1To1()*n,t){default:case s.ItemID.Heart:e=this.itemSpawnManager.create(s.ItemID.Heart),i="Heart",this.itemSpawnManager.spawn(e,i,s.ItemID.Heart,s.ItemType.PowerUp,cc.p(a,this.ceilingY));break;case s.ItemID.Stomp:e=this.itemSpawnManager.create(s.ItemID.Stomp),i="Stomp",this.itemSpawnManager.spawn(e,i,s.ItemID.Stomp,s.ItemType.PowerUp,cc.p(a,this.ceilingY))}},onGrabItem:function(t){this.itemSpawnManager.despawn(t)},playerTomouDano:function(){this.hasHeart||this.hasChristiArma?(this.hasChristiArma?(0==--this.armaEnergy&&this.perderChristiArma(),cc.log("armaEnergy = "+this.armaEnergy),this.HUD.atualizarEnergyCountLabel(this.armaEnergy)):(this.hasHeart=!1,this.HUD.habilitarHeart(!1)),this.player.tomarDano()):this.gameOver(),this.habilitarSom&&cc.audioEngine.play(this.hitAudio,!1)},playerTocouOChaoEnquantoEmEstadoDeDesativacaoDaHabilidadeFlap:function(){this.HUD.habilitarWings(!1)},ganharVida:function(){this.habilitarSom&&cc.audioEngine.play(this.itemAudio,!1),this.hasHeart=!0,this.HUD.habilitarHeart(!0)},ganharStomp:function(){this.habilitarSom&&cc.audioEngine.play(this.itemAudio,!1),this.player.aumentarAceleracao(),this.hasStomp=!0,this.HUD.habilitarStomp(!0)},ganharNuke:function(){this.nukesCount+=this.numeroDeNukesGanhosAoFinalDoLoop,this.HUD.atualizarNukeButtonLabel(this.nukesCount),this.HUD.habilitarNukeButton(!0)},ganharChristiArma:function(){this.hasChristiArma=!0,this.armaEnergy=3,this.currentEquipActive=u.ChristiArma,this.hasRosarium&&(this.HUD.habilitarToggleArmorSword(!0),this.HUD.habilitarToggleOffSword(!1),this.HUD.checkArmor()),this.HUD.habilitarArmor(!0),cc.log("armaEnergy = "+this.armaEnergy),this.HUD.atualizarEnergyCountLabel(this.armaEnergy)},ganharRosarium:function(){this.hasRosarium=!0,this.rosariumSlash=3,this.currentEquipActive=u.RosariumSancti,this.hasChristiArma?(this.HUD.habilitarToggleArmorSword(!0),this.HUD.habilitarToggleOffSword(!1)):(this.HUD.habilitarToggleArmorSword(!1),this.HUD.habilitarToggleOffSword(!0)),this.HUD.checkSword(),this.HUD.habilitarSword(!0),cc.log("rosariumSlash = "+this.rosariumSlash),this.HUD.atualizarSlashCountLabel(this.rosariumSlash)},perderChristiArma:function(){this.hasChristiArma=!1,this.hasRosarium?(this.currentEquipActive=u.RosariumSancti,this.HUD.habilitarToggleArmorSword(!1),this.HUD.habilitarToggleOffSword(!0),this.HUD.checkSword()):(this.currentEquipActive=u.None,this.HUD.habilitarToggleArmorSword(!1),this.HUD.habilitarToggleOffSword(!1)),this.HUD.habilitarArmor(!1)},perderRosarium:function(){this.hasRosarium=!1,this.currentEquipActive=this.hasChristiArma?u.ChristiArma:u.None,this.HUD.habilitarToggleArmorSword(!1),this.HUD.habilitarToggleOffSword(!1),this.HUD.habilitarSword(!1)},toggleEquipActive:function(){cc.log("toggle"),this.currentEquipActive==u.ChristiArma?this.hasRosarium&&(this.currentEquipActive=u.RosariumSancti):this.currentEquipActive==u.RosariumSancti?this.hasChristiArma?this.currentEquipActive=u.ChristiArma:this.currentEquipActive=u.None:this.currentEquipActive==u.None&&this.hasRosarium&&(this.currentEquipActive=u.RosariumSancti)},gainScore:function(t,e,i){this.score+=e,this.loopRelativeScore+=e,this.loopRelativeScore>=this.starsToComplete&&(this.faseCorrente<o.Fases.Ultima?this.changeLevelTo(this.faseCorrente+1):this.loop()),e>1?(this.HUD.atualizarScore(this.score,!0),this.HUD.spawnTipAtScore(e,!0)):this.HUD.atualizarScore(this.score),this.HUD.atualizarLevelsProgressBar(this.loopRelativeScore);var a=this.scoreAudio,n=a;t&&(this.notLandedCounter++,this.HUD.habilitarScoreInARow(!0),this.atualizarNLCHUD(),n=this.notLandedCounter>this.nlcRequisitoParaDropItemPwUp?a:this.scoreInARowAudios[this.notLandedCounter-1]),this.notLandedCounter==this.nlcRequisitoParaDropItemPwUp&&(n=this.scoreInARowAudios[9],this.HUD.atualizarScoreInARow(null,!0),this.spawnNewPowerUpItem()),this.habilitarSom&&cc.audioEngine.play(n,!1),this.HUD.dispararCollectingAnimation(i),this.spawnNewScoreItem()},atualizarNLCHUD:function(){this.notLandedCounter<this.nlcRequisitoParaDropItemPwUp?this.HUD.atualizarScoreInARow(this.notLandedCounter+"/"+this.nlcRequisitoParaDropItemPwUp,!1):this.notLandedCounter<this.nlcRequisitoParaUpgradeItemScore1?this.HUD.atualizarScoreInARow(this.notLandedCounter+"/"+this.nlcRequisitoParaUpgradeItemScore1,!1):this.notLandedCounter<this.nlcRequisitoParaUpgradeItemScore2?this.HUD.atualizarScoreInARow(this.notLandedCounter+"/"+this.nlcRequisitoParaUpgradeItemScore2,!1):this.HUD.atualizarScoreInARow(this.notLandedCounter,!1)},aumentarRequisitosNlc:function(){this.nlcRequisitoParaDropItemPwUp+=5,this.nlcRequisitoParaUpgradeItemScore1+=5,this.nlcRequisitoParaUpgradeItemScore2+=5,this.nlcRequisitoParaDropItemPwUp>this.nlcRequisitoParaDropItemPwUpInicial&&(this.nlcRequisitoParaDropItemPwUp=this.nlcRequisitoParaDropItemPwUpInicial),this.nlcRequisitoParaUpgradeItemScore1<this.nlcRequisitoParaUpgradeItemScore1Inicial&&(this.nlcRequisitoParaUpgradeItemScore1=this.nlcRequisitoParaUpgradeItemScore1Inicial),this.nlcRequisitoParaUpgradeItemScore2<this.nlcRequisitoParaUpgradeItemScore2Inicial&&(this.nlcRequisitoParaUpgradeItemScore2=this.nlcRequisitoParaUpgradeItemScore2Inicial)},diminuirRequisitosNlc:function(){this.nlcRequisitoParaDropItemPwUp-=5,this.nlcRequisitoParaUpgradeItemScore1-=5,this.nlcRequisitoParaUpgradeItemScore2-=5,this.nlcRequisitoParaDropItemPwUp<5&&(this.nlcRequisitoParaDropItemPwUp=5),this.nlcRequisitoParaUpgradeItemScore1<10&&(this.nlcRequisitoParaUpgradeItemScore1=10),this.nlcRequisitoParaUpgradeItemScore2<15&&(this.nlcRequisitoParaUpgradeItemScore2=15)},resetarRequisitosNlc:function(){this.nlcRequisitoParaDropItemPwUp=this.nlcRequisitoParaDropItemPwUpInicial,this.nlcRequisitoParaUpgradeItemScore1=this.nlcRequisitoParaUpgradeItemScore1Inicial,this.nlcRequisitoParaUpgradeItemScore2=this.nlcRequisitoParaUpgradeItemScore2Inicial,this.atualizarNLCHUD()},resumir:function(){this.spawnNewScoreItem(!0),this.resetarRequisitosNlc(),this.player.habilitarAvatar(!0),this.nukesCount>2?this.nukesCount=Math.round(.3*this.nukesCount):this.nukesCount=0,this.HUD.atualizarNukeButtonLabel(this.nukesCount)},gameOver:function(){this.player.habilitarAvatar(!1),this.objectsLayer.removeAllChildren(),this.habilitarSom&&cc.audioEngine.play(this.gameOverAudio,!1),this.gameOverPanel.init(this,this.nukesCount>2),this.gameOverPanel.abrir()},update:function(t){this.player.getAvatarPosition().y>this.ceilingY?this.HUD.habilitarPosIndicator(!0):this.HUD.habilitarPosIndicator(!1)}}),"undefined"==typeof u){var u={};u.None=0,u.ChristiArma=1,u.RosariumSancti=2}a.getFaseById=function(t,e){for(var i in t.fases){var a=t.fases[i];if(a.IDFase==e)return a}return null},cc._RFpop()},{GameOverMenu:"GameOverMenu",HUDManager:"HUDManager",Item:"Item",MainMenu:"MainMenu",Monster:"Monster",Player:"Player",globals:"globals"}],HUDManager:[function(t,e,i){"use strict";cc._RFpush(e,"cd9773DGX1DjYcdVBxTbtsx","HUDManager");cc.Class({"extends":cc.Component,properties:{scoreDisplay:{"default":null,type:cc.Label},loops:cc.Label,heartHUD:cc.Node,stompHUD:cc.Node,wingsHUD:cc.Node,armorHUD:cc.Node,swordHUD:cc.Node,scoreInARowIcon:cc.Node,scoreInARowLabel:cc.Label,nukeButton:cc.Node,starSpeedMeter:cc.Sprite,levelsProgressBar:cc.ProgressBar,loopChangedAnim:cc.Node,starIconPrefab:cc.Prefab,posIndicator:cc.Node,toggleOffSword:cc.Toggle,toggleArmorSword:cc.Toggle},init:function(t){this.game=t,this.habilitarHeart(!1),this.habilitarStomp(!1),this.habilitarWings(!1),this.habilitarArmor(!1),this.habilitarSword(!1),this.habilitarScoreInARow(!1),this.habilitarLoopChangedAnim(!1),this._atualizarLevelsProgressBar(0),this.habilitarPosIndicator(!1),this.habilitarToggleOffSword(!1),this.habilitarToggleArmorSword(!1)},onLoad:function(){this.scoreInARowParent=this.scoreInARowIcon.parent,this.nukeButtonLabel=this.nukeButton.getChildren()[0].getComponent(cc.Label),this.nukeButtonChargingCircle=this.nukeButton.parent.getChildByName("charging_circle"),this.nukeButtonChargingCircle.getComponent("AnimationEvents").init(this),this.loopChangedAnim.getComponent("AnimationEvents").init(this),this.lblEnergyCount=this.armorHUD.getChildByName("lblEnergyCount").getComponent(cc.Label),this.lblSlashCount=this.swordHUD.getChildByName("lblSlashCount").getComponent(cc.Label),this.toggleOffSword.node.on("toggle",this.togglar,this),this.toggleArmorSword.node.on("toggle",this.togglar,this)},atualizarScore:function(t,e){if(this.scoreDisplay.string=t.toString(),e){var i=.3,a=cc.tintTo(i,0,255,0),o=cc.tintTo(i,255,255,255),n=cc.sequence(a,o),s=cc.sequence(a.clone(),o.clone()),r=this.scoreDisplay.node.parent,c=r.getChildByName("starIcon");this.scoreDisplay.node.runAction(n),c.runAction(s)}},dispararCollectingAnimation:function(t){var e=cc.instantiate(this.starIconPrefab);e.setPosition(t),e.setScale(.5);var i=1500,a=cc.p(-402,229),o=cc.pDistance(t,a)/i,n=cc.moveTo(o,a),s=(cc.scaleTo(o,.5),cc.scaleTo(o,1)),r=function(){e.destroy()},c=cc.spawn(n,s),h=cc.sequence(c,cc.callFunc(r));this.node.addChild(e),e.runAction(h)},habilitarHeart:function(t){this.heartHUD.active=t},habilitarStomp:function(t){this.stompHUD.active=t},habilitarWings:function(t){this.wingsHUD.active=t},habilitarArmor:function(t){this.armorHUD.active=t},atualizarEnergyCountLabel:function(t){this.lblEnergyCount.string=t.toString()},habilitarSword:function(t){this.swordHUD.active=t},atualizarSlashCountLabel:function(t){this.lblSlashCount.string=t.toString()},habilitarScoreInARow:function(t){this.scoreInARowParent.active=t},atualizarScoreInARow:function(t,e){this.scoreInARowIcon.runAction(cc.sequence(cc.scaleTo(.3,1.3),cc.scaleTo(.3,1))),e?this.scoreInARowIcon.runAction(cc.sequence(cc.tintTo(.3,235,255,0),cc.tintTo(.3,255,255,255))):this.scoreInARowLabel.string=t.toString()},habilitarNukeButton:function(t){this.nukeButton.interactable=t},atualizarNukeButtonLabel:function(t){this.nukeButtonLabel.string=t.toString()},dispararNukeButtonChargingCircle:function(){var t=this.nukeButtonChargingCircle.getComponent(cc.Animation);this.nukeButton.interactable&&t.play()},_resetarNukeButtonChargingCircle:function(){this.nukeButtonChargingCircle.getComponent(cc.Sprite).fillRange=0},cancelarNukeButtonChargingCircle:function(){var t=this.nukeButtonChargingCircle.getComponent(cc.Animation);t.stop(),this._resetarNukeButtonChargingCircle()},onChargeCompleted:function(){this._resetarNukeButtonChargingCircle(),this.game.destroyAllMonsters()},atualizarStarSpeedMeter:function(t){this.starSpeedMeter.fillRange=t},atualizarLevelsProgressBar:function(t){this._atualizarLevelsProgressBar(t/200)},_atualizarLevelsProgressBar:function(t){this.levelsProgressBar.progress=t},atualizarLoops:function(t){this.loops.string=t.toString()},habilitarLoopChangedAnim:function(t){this.loopChangedAnim.parent.active=t},dispararLoopChangedAnimation:function(){this.habilitarLoopChangedAnim(!0);var t=this.loopChangedAnim.getComponent(cc.Animation);t.play()},onLoopChangedAnimationCompleted:function(){this.habilitarLoopChangedAnim(!1)},spawnTipAtScore:function(t,e){var i=this.scoreDisplay.node.parent,a=i.getChildByName("starIcon"),o=cc.p(0,0);this.spawnTip(t,e,o,a)},spawnTip:function(t,e,i,a){var o=new cc.Node("tip");o.setPosition(i);var n=o.addComponent(cc.Label);n.fontSize=35,n.lineHeight=40,n.string=e?"+"+t.toString():"-"+t.toString(),a.addChild(o);var s=.8,r=cc.moveBy(s,cc.p(0,30)),c=new cc.FadeOut(s),h=(new cc.TintTo(s,0,255,0),new cc.TintTo(s,255,0,0),function(){o.destroy()}),l=cc.spawn(r,c),u=cc.sequence(l,cc.callFunc(h));o.runAction(u)},habilitarPosIndicator:function(t){this.posIndicator.active=t},_scalePosIndicator:function(t){var e=t-this.game.ceilingY;if(e<=0)this.posIndicator.setScale(1.5);else if(e>=200)this.posIndicator.setScale(.5);else{var i=1.5-e/400*2,a=i;this.posIndicator.setScale(a)}},habilitarToggleOffSword:function(t){this.toggleOffSword.node.active=t},_manualToggleOffSword:function(){this.toggleOffSword.isChecked?this.toggleOffSword.uncheck():this.toggleOffSword.check()},checkOff:function(){this.toggleOffSword.node.off("toggle",this.togglar,this),this.toggleOffSword.uncheck(),this.toggleOffSword.node.on("toggle",this.togglar,this)},habilitarToggleArmorSword:function(t){this.toggleArmorSword.node.active=t},_manualToggleArmorSword:function(){this.toggleArmorSword.isChecked?this.toggleArmorSword.uncheck():this.toggleArmorSword.check()},checkArmor:function(){this.toggleArmorSword.node.off("toggle",this.togglar,this),this.toggleArmorSword.uncheck(),this.toggleArmorSword.node.on("toggle",this.togglar,this)},checkSword:function(){this.toggleOffSword.node.off("toggle",this.togglar,this),this.toggleArmorSword.node.off("toggle",this.togglar,this),this.toggleOffSword.check(),this.toggleArmorSword.check(),this.toggleOffSword.node.on("toggle",this.togglar,this),this.toggleArmorSword.node.on("toggle",this.togglar,this)},manualToggleEquip:function(){this.game.hasRosarium&&this.game.hasChristiArma?this._manualToggleArmorSword():this.game.hasRosarium&&!this.game.hasChristiArma&&this._manualToggleOffSword()},togglar:function(){this.game.toggleEquipActive()},update:function(t){var e=this.game.player.getAvatarPosition();this.posIndicator.x=e.x,this._scalePosIndicator(e.y)}});cc._RFpop()},{}],Heart:[function(t,e,i){"use strict";cc._RFpush(e,"0d58cWOsyZMYoyWC6b/zIkh","Heart");var a=t("PowerItem");cc.Class({"extends":a,properties:{},onLoadChild:function(){},coletou:function(t){this.game.ganharVida()},sumiu:function(){}}),cc._RFpop()},{PowerItem:"PowerItem"}],ItemSpawnManager:[function(t,e,i){"use strict";cc._RFpush(e,"f813bX7axFP+r596GGn3Lf/","ItemSpawnManager");var a=(t("globals"),t("Item"));cc.Class({"extends":cc.Component,properties:{_pools:{"default":[],type:[cc.NodePool]},prefabs:{"default":[],type:[cc.Prefab],tooltip:"Indice da lista deve ser igual ao id do item"}},onLoad:function(){this._pools[a.ItemID.Alma]=new cc.NodePool("Item"),this._pools[a.ItemID.Heart]=new cc.NodePool("Item"),this._pools[a.ItemID.Stomp]=new cc.NodePool("Item"),this._pools[a.ItemID.Armor]=new cc.NodePool("Item"),this._pools[a.ItemID.Sword]=new cc.NodePool("Item"),this._pools[a.ItemID.Alma1]=new cc.NodePool("Item"),this._pools[a.ItemID.Alma2]=new cc.NodePool("Item")},init:function(t){this.game=t;var e=2,i=0;this._pools.forEach(function(t){for(var a=0;a<e;a++){var o=cc.instantiate(this.prefabs[i]);t.put(o)}i++},this)},create:function(t){var e=null;return e=this._pools[t].size()>0?this._pools[t].get():cc.instantiate(this.prefabs[t])},spawn:function(t,e,i,o,n){t.parent=this.game.objectsLayer,t.setPosition(n);var s=t.getComponent(e);s.init(this.game,i,o),s.itemType==a.ItemType.Score?s.cair(this.game.ceilingY-this.game.groundY,this.game.groundY,this.game.velStarAdd):s.cair(this.game.ceilingY-this.game.groundY,this.game.groundY)},despawn:function(t){this._pools[t.getComponent("Item").itemID].put(t)},despawnMany:function(t){t.forEach(function(t){this.despawn(t)},this)}});cc._RFpop()},{Item:"Item",globals:"globals"}],Item:[function(t,e,i){"use strict";cc._RFpush(e,"130a1I48PxK/ZFFRD0PJSuQ","Item");var a=cc.Enum({Alma:0,Heart:1,Stomp:2,Armor:3,Sword:4,Alma1:5,Alma2:6}),o=cc.Enum({Score:0,PowerUp:1,Shield:2});cc.Class({"extends":cc.Component,properties:{pickRadius:0,vel:0},statics:{ItemID:a,ItemType:o},onLoad:function(){this.landed=!1,this.uncollectable=!1,this.destroyed=!1,this.stopUpdate=!0,this.onLoadChild()},onLoadChild:function(){},initChild:function(){},init:function(t,e,i){this.game=t,this.itemID=e,this.itemType=i,this.landed=!1,this.uncollectable=!1,this.destroyed=!1,this.piscar(),this.initChild(),this.stopUpdate=!1},customDestroy:function(){this.game.onGrabItem(this.node)},reuse:function(){},unuse:function(){this.clean()},clean:function(){this.stopUpdate=!0,this.node.setColor(cc.Color.WHITE),this.node.stopAllActions(),this.node.opacity=255,this.node.runAction(cc.tintTo(.1,255,255,255))},cair:function(t,e,i){i=i?i:0;var a=t/(this.vel+i),o=new cc.MoveTo(a,cc.p(this.node.x,e+this.node.height/2));
this.node.runAction(o)},onPicked:function(t){},onLanded:function(){},onLandedFather:function(){this.landed=!0,this.node.stopActionByTag(1),this.node.setColor(cc.Color.WHITE),this.onLanded()},piscar:function(){var t=new cc.TintTo(.5,140,140,140),e=new cc.TintTo(.5,255,255,255),i=cc.repeatForever(cc.sequence(t,e));i.setTag(1),this.node.runAction(i)},onCollisionEnter:function(t,e){this.uncollectable||this.onPicked(this.node.getPosition())},update:function(t){this.stopUpdate||(Math.round(this.node.y-1)<this.game.groundY+this.node.height/2&&(this.landed||this.onLandedFather()),this.updateChild(t))},updateChild:function(t){}});cc._RFpop()},{}],Leaderboard:[function(t,e,i){"use strict";cc._RFpush(e,"969d52bUAlA8I9L6C5t+tHW","Leaderboard");var a=t("REST"),o=cc.Class({properties:{_baseUrl:"https://soulsget.firebaseio.com"},save:function(t,e,i,o){var n=this._baseUrl+"/scores.json",s={id:t,nome:e,score:i};a.post(n,s,null,function(e){this.getQtdeScores(function(i){cc.log("buscou count com sucesso");var n=this._baseUrl+"/_metadata.json",s={count:++i};if(a.put(n,s,function(t){cc.log("atualizou count com sucesso")}),!t){var r=e.name;n=this._baseUrl+"/scores/"+r+"/id.json",a.put(n,r,function(t){cc.log("id preenchido")})}o&&o(e)}.bind(this))}.bind(this))},getAllScores:function(t){var e=this._baseUrl+"/1/query/data/allScores",i={header:"AnonymousToken",valor:"8bd500fc-f7d2-4e3e-a27e-2a14667f28c2"};a.getJson(e,i,function(e){var i=[];for(var a in e)i.push(e[a]);t(i)})},getUltimosNScores:function(t,e){var i=this._baseUrl+'/scores.json?orderBy="score"&limitToLast='+t;a.getJson(i,null,function(t){var i=[];for(var a in t)t[a].id=a,i.push(t[a]);i.sort(function(t,e){return e.score-t.score}),e(i)})},getNScoresByPage:function(t,e,i){var o=this._baseUrl+":443/1/objects/ranking?pageSize="+t+"&pageNumber="+e+"&sort=%5B%20%7B%20%20%20%20%22fieldName%22%3A%20%22score%22%2C%20%20%20%20%22order%22%3A%20%22desc%22%20%20%7D%5D&exclude=metadata",n={header:"AnonymousToken",valor:"8bd500fc-f7d2-4e3e-a27e-2a14667f28c2"};a.getJson(o,n,function(t){var e=[];for(var a in t.data)e.push(t.data[a]);i(e)})},getQtdeScores:function(t){var e=this._baseUrl+"/_metadata.json";a.getJson(e,null,function(e){t(e.count)})},hasRankeadoByNome:function(t,e){var i=this._baseUrl+"/scores.json??orderBy='nome'&equalTo='"+t+"'";a.getJson(i,null,function(t){var i=0;for(j in t)i++;e(i>0)})}});e.exports=o,cc._RFpop()},{REST:"REST"}],MainMenu:[function(t,e,i){"use strict";cc._RFpush(e,"e278eHCVeFJkZKOvbXLPdtN","MainMenu"),cc.Class({"extends":cc.Component,properties:{btn_play:cc.Button,btnCheckAltControl:cc.Button,controleAlternativo:{"default":!1}},onLoad:function(){this.chkSpriteStore=this.btnCheckAltControl.normalSprite;var t=cc.sys.localStorage,e=t.getItem("alternativeControl");!e&&"true"!=e||"false"==e||(this.controleAlternativo=e),this.controleAlternativo&&(this.btnCheckAltControl.normalSprite=this.btnCheckAltControl.pressedSprite)},init:function(t){this.game=t},startGame:function(){this.game.init(this.controleAlternativo)},showHelpAltControl:function(t){},onCheckedAltControl:function(){var t=cc.sys.localStorage;this.btnCheckAltControl.normalSprite==this.btnCheckAltControl.pressedSprite?(this.btnCheckAltControl.normalSprite=this.chkSpriteStore,this.controleAlternativo=!1):(this.btnCheckAltControl.normalSprite=this.btnCheckAltControl.pressedSprite,this.controleAlternativo=!0),t.setItem("alternativeControl",""+this.controleAlternativo)},abrir:function(){this.node.setPosition(0,0);var t=this.node.getComponent(cc.Widget);t.left=t.right=t.top=t.bottom=0},fechar:function(){this.node.setPosition(1200,0);var t=this.node.getComponent(cc.Widget);t.left=1200,t.right=-1200}}),cc._RFpop()},{}],Monster:[function(t,e,i){"use strict";cc._RFpush(e,"aa8f2HS+NlEiZwxR4+lj4vC","Monster");var a=cc.Enum({Nulo:0,Pular:1,Voar:2}),o=cc.Class({"extends":cc.Component,properties:{collideRadius:0,monsterAudio:{"default":null,url:cc.AudioClip},stompedAudio:{"default":null,url:cc.AudioClip}},statics:{Skills:a},isStomp:function(t,e){var i=t.world.aabb,a=e.world.aabb;return i.baixo=i.y,a.centroVertical=a.center.y,0==t.tag&&i.baixo>a.centroVertical},onCollide:function(t){this.game.hasStomp&&t&&this.habilitarSom&&cc.audioEngine.playEffect(this.stompedAudio,!1),this.game.avaliarColisaoComMonstro(t,this)},die:function(t){this.destroyed=!0;var e=function(){this.game.onEnemyDeath(this.node)}.bind(this);switch(t){case"slash":var i=this._slashEffect.play(),a=cc.sequence(cc.delayTime(i.duration),cc.callFunc(e));this.node.runAction(a);break;default:e()}},unuse:function(){this.clean()},onLoad:function(){this._slashEffect=this.node.getChildByName("slash1").getComponent(cc.Animation),this.stopUpdate=!0},init:function(t,e,i){switch(this.game=t,this.habilitarSom=t.habilitarSom,this.xSpeed=0,this.maxMoveSpeed=e,this.stopUpdate=!1,this.skill=i,i){case o.Skills.Pular:this.initJumpParams(),this.jump();break;case o.Skills.Voar:this.initFlyParams(),this.fly()}this._indoParaDireita=!0,this._indoParaEsquerda=!0,this.habilitarSom&&cc.audioEngine.playEffect(this.monsterAudio,!1),this.destroyed=!1},initJumpParams:function(){this.jumpDuration=.5,this.jumpHeight=180,this.isJumping=!1,this.jumpAction=this.getJumpAction(),this.scaleAction=this.getScaleAction(),this.bendAction=this.getBendAction()},initFlyParams:function(){this.ascendDuration=1,this.ascendHeight=180,this.ascendAction=this.getAscendAction(),this.upAndDownAction=this.getUpAndDownAction()},clean:function(){this.stopUpdate=!0,this.isJumping=!1,this.node.stopAllActions()},getJumpAction:function(){var t=cc.moveBy(this.jumpDuration,cc.p(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),e=cc.moveBy(this.jumpDuration,cc.p(0,-this.jumpHeight)).easing(cc.easeCubicActionIn()),i=function(){this.isJumping=!0}.bind(this),a=function(){this.isJumping=!1}.bind(this),o=cc.sequence(cc.callFunc(i),t,e,cc.callFunc(a));return o.setTag(1),o},getScaleAction:function(){var t=this.jumpDuration/2,e=cc.scaleTo(t,.7,1.5).easing(cc.easeCubicActionOut()),i=cc.scaleTo(t,1).easing(cc.easeCubicActionIn()),a=cc.sequence(e,i);return a},getBendAction:function(){var t=1.5,e=.3,i=cc.scaleTo(t,1,.7).easing(cc.easeCubicActionOut()),a=cc.scaleTo(e,1).easing(cc.easeCubicActionIn()),o=cc.sequence(i,a);return o},getAscendAction:function(){var t=cc.moveBy(this.ascendDuration,cc.p(0,this.ascendHeight)).easing(cc.easeCubicActionOut());return t},getUpAndDownAction:function(){var t=.5,e=30,i=cc.moveBy(t,cc.p(0,e)),a=cc.moveBy(t,cc.p(0,-e)),o=cc.repeatForever(cc.sequence(a,i));return o},flapWingsAnimate:function(){var t=this.getComponent(cc.Animation),e=t.play();cc.log("isPaused:"+e.isPaused)},jump:function(){var t=cc.sequence(this.bendAction,cc.spawn(this.scaleAction,this.jumpAction));this.node.runAction(cc.repeatForever(t))},fly:function(){this.flapWingsAnimate();var t=function(){this.node.stopAllActions(),this.node.runAction(this.upAndDownAction)}.bind(this);this.node.runAction(cc.sequence(this.ascendAction,cc.callFunc(t)))},_inclinar:function(){if(this._indoParaDireita){var t=this.getComponent(cc.Animation);t.playAdditive("skewingRight")}if(this._indoParaEsquerda){var t=this.getComponent(cc.Animation);t.playAdditive("skewingLeft")}},onCollisionEnter:function(t,e){this.game.player.isInvincible()||this.onCollide(this.isStomp(t,e))},update:function(t){if(!this.stopUpdate){var e=this.game.player.avatarNode.getPosition();this.isJumping||(e.x>this.node.x?(this.xSpeed+=1e3*t,this._indoParaEsquerda&&(this._indoParaDireita=!0,this._indoParaEsquerda=!1,this._inclinar())):e.x<this.node.x&&(this.xSpeed-=1e3*t,this._indoParaDireita&&(this._indoParaDireita=!1,this._indoParaEsquerda=!0,this._inclinar()))),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),this.node.x+=this.xSpeed*t}}});cc._RFpop()},{}],Player:[function(t,e,i){"use strict";cc._RFpush(e,"fbbbdD1qa1B94kBRuljsqGG","Player");var a=t("HUDManager"),o=t("SimpleRecognizer");cc.Class({"extends":cc.Component,properties:{avatarNode:{"default":null,type:cc.Node},HUD:a},onLoad:function(){this.avatar=this.avatarNode.getComponents(cc.Component)[1],this.btnNuke=this.HUD.nukeButton,this.setInputControl(),this.enableInput(!1)},start:function(){},init:function(t,e){this.enableInput(!0),this.enableAccelerometer(!e),this.avatar.init(t),this.game=t,this.controleAlternativo=e},pular:function(){this.avatar.jump()},iniciarFlap:function(){this.avatar.initFlap()},desativarFlap:function(){var t=this.avatar.deactivateFlap();return t},flap:function(){this.avatar.flap()},fly:function(t){this.avatar.flyTo(t)},andarEsquerda:function(){this.avatar.moveLeft()},andarDireita:function(){this.avatar.moveRight()},isInvincible:function(){return this.avatar.invincible},tomarDano:function(){this.avatar.tomarDano()},aumentarAceleracao:function(){this.avatar.resetAccel(),this.avatar.accelUp(200)},diminuirAceleracao:function(){this.avatar.resetAccel()},ativarNuke:function(){this.HUD.dispararNukeButtonChargingCircle()},cancelarNuke:function(t){this.HUD.cancelarNukeButtonChargingCircle()},toggleEquip:function(){this.HUD.manualToggleEquip()},habilitarAvatar:function(t){t?this.avatar.resumir():this.avatar.clean()},avatarIsOnGround:function(){return this.avatar.isOnGround()},getAvatarPosition:function(){return this.avatarNode.getPosition()},setInputControl:function(){this.recognizer=new o,this.toggle=!1;var t=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(e,i){var a=t.node.convertTouchToNodeSpaceAR(e);return t.controleAlternativo?a.x<0?t.avatar.jumpIsDone()?t.pular():t.flap():t.toggle?(t.andarEsquerda(),t.toggle=!1):(t.andarDireita(),t.toggle=!0):t.avatar.jumpIsDone()?t.pular():t.flap(),!0}},this.avatarNode),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(e,i){var a=t.btnNuke.convertTouchToNodeSpaceAR(e),o=t.btnNuke.getBoundingBox();return!!o.contains(a)&&(cc.log("tocou no botao"),t.ativarNuke(),!0)},onTouchEnded:function(e,i){cc.log("soltou o botao"),t.cancelarNuke()}},this.btnNuke),cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.a:t.andarEsquerda();break;case cc.KEY.d:t.andarDireita();break;case cc.KEY.space:t.avatar.jumpIsDone()?t.pular():t.flap();break;case cc.KEY.b:t.ativarNuke();break;case cc.KEY.r:t.toggleEquip()}},onKeyReleased:function(e,i){e==cc.KEY.b&&t.cancelarNuke()}},t.avatarNode),cc.sys.capabilities.hasOwnProperty("accelerometer")&&cc.eventManager.addListener({event:cc.EventListener.ACCELERATION,callback:function(e,i){e.x>0?t.andarDireita():e.x<0&&t.andarEsquerda()}},t.avatarNode)},enableAccelerometer:function(t){cc.inputManager.setAccelerometerInterval(.1),cc.inputManager.setAccelerometerEnabled(t)},enableInput:function(t){t?(cc.eventManager.resumeTarget(this.avatarNode),cc.eventManager.resumeTarget(this.btnNuke)):(cc.eventManager.pauseTarget(this.avatarNode),cc.eventManager.pauseTarget(this.btnNuke))}});cc._RFpop()},{HUDManager:"HUDManager",SimpleRecognizer:"SimpleRecognizer"}],PowerItem:[function(t,e,i){"use strict";cc._RFpush(e,"63d1barKy9FYajzZ8EHsbxQ","PowerItem");var a=t("Item");cc.Class({"extends":a,properties:{tempoParaSumir:{"default":1}},onLoadChild:function(){},onPicked:function(t){this.coletou(t),this.customDestroy()},coletou:function(t){},sumiu:function(){},onLanded:function(){this.sumir(),this.sumiu()},sumir:function(){var t=new cc.FadeOut(this.tempoParaSumir),e=function(){this.customDestroy()}.bind(this);this.node.runAction(cc.sequence(t,cc.callFunc(e)))}}),cc._RFpop()},{Item:"Item"}],PurpleGuy:[function(t,e,i){"use strict";cc._RFpush(e,"bc543WBRE1MIYRVLb+BkeRF","PurpleGuy");t("globals");cc.Class({"extends":cc.Component,properties:{jumpHeight:0,jumpDuration:0,maxMoveSpeed:0,accel:0,flapSpeedStart:{"default":600},gravity:{"default":1200},jumpAudio:{"default":null,url:cc.AudioClip}},onLoad:function(){this.jumpAction=this.getJumpActionSingle(),this.scaleAction=this.getScaleAction(),this.accLeft=!1,this.accRight=!1,this.xSpeed=0,this.ySpeed=0,this.isFlapping=!1,this.isFlapActive=!1,this.deactivatingFlap=!1,this.stopUpdate=!0,this.invincible=!1},init:function(t){this.game=t,this.habilitarSom=t.habilitarSom,this.defaultAccel=this.accel,this.stopUpdate=!1},clean:function(){this.stopUpdate=!0},resumir:function(){this.stopUpdate=!1},getJumpActionSingle:function(){var t=cc.moveBy(this.jumpDuration,cc.p(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),e=cc.moveBy(this.jumpDuration,cc.p(0,-this.jumpHeight)).easing(cc.easeCubicActionIn()),i=cc.sequence(t,e);return i.setTag(1),i},getScaleAction:function(){var t=this.jumpDuration/2,e=cc.scaleTo(t,.7,1.5).easing(cc.easeCubicActionOut()),i=cc.scaleTo(t,1).easing(cc.easeCubicActionIn()),a=cc.sequence(e,i);return a},getFlapAction:function(){var t=cc.moveBy(.3,cc.p(0,50)).easing(cc.easeCubicActionOut()),e=cc.moveTo(.3,0,this.game.groundY).easing(cc.easeCubicActionIn()),i=cc.sequence(t,e);return i},getFlyToAction:function(t,e){var i=t/this.maxMoveSpeed,a=cc.moveTo(i,e).easing(cc.easeCubicActionOut()),o=a;return o},initFlyTo:function(){this.xSpeed=0,this.stopUpdate=!0},flyTo:function(t){this.node.stopAllActions();var e=cc.pDistance(this.node.position,t),i=this.getFlyToAction(e,t);this.node.runAction(i)},playJumpSound:function(){this.habilitarSom&&cc.audioEngine.playEffect(this.jumpAudio,!1)},jump:function(){this.node.runAction(this.jumpAction),this.node.runAction(this.scaleAction),this.playJumpSound()},initFlap:function(){this.isFlapActive=!0,this.deactivatingFlap=!1},deactivateFlap:function(){return this.isFlapping?this.deactivatingFlap=!0:this.isFlapActive=!1,!this.isFlapActive},flap:function(){this.isFlapActive&&(this.node.stopActionByTag(1),this.ySpeed=this.flapSpeedStart,this.isFlapping=!0)},_touchedGroundWhileDeactivatingFlap:function(){this.game.playerTocouOChaoEnquantoEmEstadoDeDesativacaoDaHabilidadeFlap()},isOnGround:function(){return this.getBottomSide()<=this.game.groundY},setPosOnGround:function(){var t=this.node.anchorY;.5==t?this.node.y=this.game.groundY+this.node.height/2:0==t?this.node.y=this.game.groundY:this.node.y=this.game.groundY+this.node.height/2},moveLeft:function(){var t=this.getComponent(cc.Animation);this.accLeft||this.accRight||t.play("EyeMoveLeft"),1==this.accRight&&t.play("EyeMoveLeft"),this.accLeft=!0,this.accRight=!1},moveRight:function(){var t=this.getComponent(cc.Animation);this.accLeft||this.accRight||t.play("EyeMoveRight"),1==this.accLeft&&t.play("EyeMoveRight"),this.accLeft=!1,this.accRight=!0},accelUp:function(t){this.accel+=t},resetAccel:function(){this.accel=this.defaultAccel},tomarDano:function(){this.invincible=!0;var t=this.piscar();this.scheduleOnce(function(){this.node.stopAction(t),this.node.runAction(new cc.FadeIn(.1)),this.invincible=!1}.bind(this),3)},piscar:function(){var t=.1,e=.1,i=new cc.FadeIn(t),a=new cc.FadeOut(e),o=cc.sequence(i,a),n=cc.repeatForever(o);return this.node.runAction(n),n},jumpIsDone:function(){return this.jumpAction.isDone()||this.isOnGround()},getBottomSide:function(){var t=this.node.anchorY;return.5==t?this.node.y-this.node.height/2:0==t?this.node.y:this.node.y-this.node.height/2},update:function(t){if(!this.stopUpdate&&(this.accLeft?this.xSpeed-=this.accel*t:this.accRight&&(this.xSpeed+=this.accel*t),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),this.node.x+=this.xSpeed*t,this.node.x-this.node.width/2>this.game.node.width/2&&(this.node.x=-this.game.node.width/2-this.node.width/2),this.node.x+this.node.width/2<-this.game.node.width/2&&(this.node.x=this.game.node.width/2+this.node.width/2),this.isFlapActive)){var e=this.isFlapping;e&&(this.ySpeed-=this.gravity*t,this.node.y+=this.ySpeed*t),this.isOnGround()&&(this.setPosOnGround(),this.isFlapping=!1,this.deactivatingFlap&&(this.isFlapActive=!1,this.deactivatingFlap=!1,this._touchedGroundWhileDeactivatingFlap()))}}}),cc._RFpop()},{globals:"globals"}],REST:[function(t,e,i){"use strict";cc._RFpush(e,"4d281l8/ZtHQZ/z9eilFdgn","REST");var a=cc.Class();a.getJson=function(t,e,i){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&a.status>=200&&a.status<400){var t=a.response;i(t)}},a.responseType="json",a.open("GET",t,!0),e&&a.setRequestHeader(e.header,e.valor),a.send()},a.put=function(t,e,i){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&a.status>=200&&a.status<400){var t=a.response;i(t)}},a.responseType="json",a.open("PUT",t,!0),a.send(JSON.stringify(e))},a.patch=function(t,e,i){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&a.status>=200&&a.status<400){var t=a.response;i(t)}else cc.log("readyState: "+a.readyState),cc.log("xhrStatus: "+a.status),cc.log("xhrStatusText: ")+a.statusText},a.responseType="json",a.open("PATCH",t,!0),a.send(JSON.stringify(e))},a.post=function(t,e,i,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState&&o.status>=200&&o.status<400){var t=o.response;a(t)}},o.responseType="json",o.open("POST",t,!0),i&&o.setRequestHeader(i.header,i.valor),o.send(JSON.stringify(e))},e.exports=a,cc._RFpop()},{}],RankListItems:[function(t,e,i){"use strict";cc._RFpush(e,"baf2bQ+0IdJErxCZnClbQe4","RankListItems");var a=t("Leaderboard");cc.Class({"extends":cc.Component,properties:{ListItem:cc.Prefab,scroll:cc.ScrollView},onLoad:function(){this._leaderboard=new a,this._leaderboardPanel=this.scroll.node.parent},init:function(){this._atualizando=!0,this.limpar(),this.currentPage=1,this._ultimaPos=1,this._leaderboard.getUltimosNScores(10,function(t){this._loadList(t),this.scroll.scrollToTop(),this._atualizando=!1}.bind(this))},limpar:function(){this.node.removeAllChildren()},atualizar:function(){this._atualizando||(this.limpar(),this._ultimaPos=1,this._atualizando=!0,this._leaderboard.getUltimosNScores(10,function(t){this._loadList(t),this.scroll.scrollToTop(),this._atualizando=!1}.bind(this)))},fecharPanel:function(){this._leaderboardPanel.setPosition(1200,0)},carregarProxPagina:function(){this._leaderboard.getNScoresByPage(5,++this.currentPage,function(t){this._loadList(t)}.bind(this))},scrolledTop:function(){},_loadList:function(t){var e=this._ultimaPos;for(var i in t){var a=t[i];a.pos=e++;var o=cc.instantiate(this.ListItem);o.getComponent("RankListItem").init(a),this.node.addChild(o)}this._ultimaPos=e}}),cc._RFpop()},{Leaderboard:"Leaderboard"}],RankListItem:[function(t,e,i){"use strict";cc._RFpush(e,"1970aFku95CYriGaiBTvzjh","RankListItem"),cc.Class({"extends":cc.Component,properties:{labelPos:cc.Label,labelNome:cc.Label,labelScore:cc.Label},onLoad:function(){},init:function(t){this.labelPos.string=t.pos,this.labelNome.string=t.nome,this.labelScore.string=t.score}}),cc._RFpop()},{}],ScoreItem:[function(t,e,i){"use strict";cc._RFpush(e,"e63b0yTJiFDArsWO/VNfKiC","ScoreItem");var a=t("Item"),o=t("globals");cc.Class({"extends":a,properties:{pontos:{"default":1,tooltip:"Quantos pontos vale esse item?"},droppedSound:{"default":null,url:cc.AudioClip}},coletou:function(t){},aterrissou:function(){},eclodiu:function(t){},onLoadChild:function(){},onPicked:function(t){this.destroyed=!0,this.coletou(t),this.customDestroy()},onLanded:function(){this.game.habilitarSom&&cc.audioEngine.playEffect(this.droppedSound,!1),this.aterrissou(),this.eclodir()},eclodir:function(){var t=this.game.tempoEclosao;switch(this.game.faseCorrente){case o.Fases.Primeira:var e=t/3;break;case o.Fases.Segunda:var e=t/2;break;case o.Fases.Ultima:var e=t}var i=e/2,a=new cc.TintTo(i,0,255,0),n=new cc.TintTo(i,255,255,0),s=new cc.TintTo(i,255,0,0),r=new cc.TintTo(i,255,255,255),c=function(){this.destroyed=!0,this.eclodiu(this.node.x),this.customDestroy()}.bind(this);switch(this.game.faseCorrente){case o.Fases.Primeira:this.node.runAction(cc.sequence(a,r,n,r.clone(),s,r.clone(),cc.callFunc(c)));break;case o.Fases.Segunda:this.node.runAction(cc.sequence(n,r,s,r.clone(),cc.callFunc(c)));break;case o.Fases.Ultima:this.node.runAction(cc.sequence(s,r,cc.callFunc(c)))}}}),cc._RFpop()},{Item:"Item",globals:"globals"}],ShieldItem:[function(t,e,i){"use strict";cc._RFpush(e,"c08bbWILShGUqGlpLZXgoqe","ShieldItem");var a=t("Item");cc.Class({"extends":a,properties:{tempoParaSumir:{"default":1},camadasDeProtecao:{"default":3},progressBar:{"default":null,type:cc.ProgressBar}},hit:function(t){},sumiu:function(){},onLoadChild:function(){},initChild:function(){this.progressBar.progress=0,this.progressBar.node.opacity=0},onBrake:function(t){this.hit(t),this.customDestroy()},onPicked:function(t){this.uncollectable=!0;var e=this.tingir();this.scheduleOnce(function(){this.node.stopAction(e);var t=.1,i=new cc.TintTo(t,255,255,255);this.node.runAction(i),this.uncollectable=!1}.bind(this),.5),this.progressBar.node.opacity=255,this.progressBar.progress+=.2},onLanded:function(){this.sumir(),this.sumiu()},tingir:function(){var t=.1,e=new cc.TintTo(t,255,0,0),i=new cc.TintTo(t,255,255,255),a=cc.sequence(e,i),o=cc.repeatForever(a);return this.node.runAction(o),o},sumir:function(){var t=new cc.FadeOut(this.tempoParaSumir),e=function(){this.customDestroy()}.bind(this);this.node.runAction(cc.sequence(t,cc.callFunc(e)))},onCollisionStay:function(t,e){this.uncollectable||this.onPicked(this.node.getPosition())},updateChild:function(t){var e=this.progressBar.progress;e>0?e-=.1*t:e=0,e>=1&&(e=1,this.onBrake(this.node.getPosition())),this.progressBar.progress=e}}),cc._RFpop()},{Item:"Item"}],SimpleRecognizer:[function(t,e,i){"use strict";function a(t,e){this.X=t,this.Y=e}function o(){this.points=[],this.result=""}cc._RFpush(e,"cc8c0It/AxHhp6UsoR/ompO","SimpleRecognizer"),o.prototype.beginPoint=function(t,e){this.points=[],this.result="",this.points.push(new a(t,e))},o.prototype.movePoint=function(t,e){if(this.points.push(new a(t,e)),"not support"!=this.result){var i="",o=this.points.length,n=this.points[o-1].X-this.points[o-2].X,s=this.points[o-1].Y-this.points[o-2].Y;return i=Math.abs(n)>Math.abs(s)?n>0?"right":"left":s>0?"up":"down",""==this.result?void(this.result=i):void(this.result!=i&&(this.result="not support"))}},o.prototype.endPoint=function(){return this.points.length<3?"error":this.result},o.prototype.getPoints=function(){return this.points},e.exports=o,cc._RFpop()},{}],Special:[function(t,e,i){"use strict";cc._RFpush(e,"64261n3l0pFjbRpDQ6b/EIL","Special");var a=t("ScoreItem");cc.Class({"extends":a,properties:{},coletou:function(t){this.game.gainScore(!this.landed,this.pontos,t)},aterrissou:function(){this.game.scoreItemTocouOChao()},eclodiu:function(t){this.game.scoreItemEclodiu(t)}}),cc._RFpop()},{ScoreItem:"ScoreItem"}],StarResistente:[function(t,e,i){"use strict";cc._RFpush(e,"b6136jHdwhImrAsrpEe6eTE","StarResistente");var a=t("ShieldItem");cc.Class({"extends":a,properties:{},hit:function(t){this.node.destroy()},sumiu:function(){}}),cc._RFpop()},{ShieldItem:"ShieldItem"}],Star:[function(t,e,i){"use strict";cc._RFpush(e,"0568fZXPlRBBIPzrQpUDLbZ","Star");var a=t("ScoreItem");cc.Class({"extends":a,properties:{},coletou:function(t){this.game.gainScore(!this.landed,this.pontos,t)},aterrissou:function(){this.game.scoreItemTocouOChao()},eclodiu:function(t){this.game.scoreItemEclodiu(t)}}),cc._RFpop()},{ScoreItem:"ScoreItem"}],Stomp:[function(t,e,i){"use strict";cc._RFpush(e,"d1954I+Z/9F84C9O1mTYzqG","Stomp");var a=t("PowerItem");cc.Class({"extends":a,properties:{},onLoadChild:function(){},coletou:function(t){this.game.ganharStomp()},sumiu:function(){}}),cc._RFpop()},{PowerItem:"PowerItem"}],globals:[function(t,e,i){"use strict";cc._RFpush(e,"17d21+HDFJBY43vkMnhXbaQ","globals");var a={Fases:cc.Enum({Primeira:1,Segunda:2,Ultima:3}),randomIntFromInterval:function(t,e){var i=Math.floor(Math.random()*(e-t+1)+t);return i},randomFromInterval:function(t,e){var i=Math.random()*(e-t+1)+t;return i},randomWith30PercentProbability:function(){var t=[1,1,1,0,0,0,0,0,0,0],e=Math.floor(Math.random()*t.length);return t[e]},randomWith10PercentProbability:function(){var t=[1,0,0,0,0,0,0,0,0,0],e=Math.floor(Math.random()*t.length);return t[e]},randomWith1PercentProbability:function(){for(var t=[1],e=1;e<100;e++)t[e]=0;var i=Math.floor(Math.random()*t.length);return t[i]},randomWith20PercentProbability:function(){var t=[1,1,0,0,0,0,0,0,0,0],e=Math.floor(Math.random()*t.length);return t[e]},randomFromList:function(t){var e=Math.floor(Math.random()*t.length);return t[e]}};e.exports=a,cc._RFpop()},{}]},{},["AnimationEvents","Monster","PurpleGuy","EnemySpawnManager","Game","ItemSpawnManager","Item","PowerItem","Heart","Stomp","ScoreItem","Special","Star","ShieldItem","StarResistente","Leaderboard","Player","REST","GameOverMenu","HUDManager","MainMenu","RankListItem","RankListItems","SimpleRecognizer","globals"]);